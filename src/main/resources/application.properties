#
# IDProxy 設定
#

# IDProxy アプリケーションのベース URL。ユーザーが認証されていない状態で
# 保護されたリソースにアクセスしようとした際に、ログインページへのリダイレクト URL を
# 構築するために使用されます。
idproxy.base-url=http://localhost:8080

# リターン URL が有効かどうかをチェックする正規表現。オープンリダイレクタとして
# 使用されることを防ぎます。複数の正規表現を指定できます。
idproxy.valid-return-url[0]=^http:\/\/localhost:8080\/.*$

#
# セッションクッキー設定
#

# セッションクッキーの暗号化キー。このキーの SHA-256 ハッシュを計算し、
# それを暗号化のキーとして使用します。任意の長さで指定できます。
idproxy.security.session.cookie.key=changemefromthissimplekey

#
# デフォルト値は IDPROXY です。変更する場合は、src/main/resources/META-INF ディレクトリの
# undertow-handlers.conf ファイルも変更して、正しい SameSite が設定されるようにする必要があります。
# SAML POST が動作するためには None である必要があります。
#
#idproxy.security.session.cookie.name=IDPROXY

# セッションクッキーのドメイン。クッキーの domain 属性を設定するために使用され、
# アプリケーションのドメイン(idproxy.base-url を参照)と一致する必要があります。
idproxy.security.session.cookie.domain=localhost

#
# アイデンティティクッキー設定(JWT トークンを保持)
#

#
# デフォルト値は ID です。変更する場合は、src/main/resources/META-INF ディレクトリの
# undertow-handlers.conf ファイルも変更して、正しい SameSite が設定されるようにする必要があります。
# セキュリティ要件に応じて None または Lax を指定できます。Lax が推奨されます。
#
#idproxy.security.jwt.cookie.name=ID

# セッションクッキーのドメイン。クッキーの domain 属性を設定するために使用され、
# アプリケーションのドメインと一致する必要があります。通常、ログインエンドポイントの
# リターン URL と一致する必要があります。
idproxy.security.jwt.cookie.domain=localhost

# クッキーのパス。クッキーの path 属性を設定するために使用され、
# アプリケーションのパスと一致する必要があります。通常、ログインエンドポイントの
# リターン URL と一致する必要があります。
idproxy.security.jwt.cookie.path=/

#
# SAML IDP(アップストリーム IDP)設定
#

# IDP の entityID。SAML リクエストの送信に使用するアップストリーム IDP の
# メタデータを特定するために使用されます。
idproxy.idp.entityID=https://galatea.stenlund.eu/idp

# IDP のメタデータファイルの場所。上記で指定した entityID のメタデータを
# 含んでいる必要があります。
idproxy.idp.metadata=/home/tomas/projects/quarkus-saml/src/main/resources/idp-metadata.xml

# SAML レスポンスでユーザーを識別するために使用される属性。デフォルト値は
# 以下の通りです。
#idproxy.idp.uid=urn:oid:0.9.2342.19200300.100.1.1
#idproxy.idp.friendlyUID=uid

#
# SAML SP(このアプリケーション)設定
#

# SP の entityID。SAML リクエストを構築するために使用され、アップストリーム IDP に
# 登録するメタデータと一致する必要があります。メタデータは手動で作成し、
# アップストリーム IDP に登録する必要があります。アサーションコンシューマサービス URL は
# assert エンドポイントの URL で、POST のみです。src/main/resources ディレクトリの
# SP のメタデータ例を参照してください。
idproxy.sp.entityID=https://tomas.stenlund.eu

# 署名および暗号化キーの場所。メタデータ内のそれぞれの公開証明書と
# 一致している必要があります。
idproxy.sp.signing.pem=/home/tomas/projects/quarkus-saml/src/main/resources/sp-signing.key
idproxy.sp.encryption.pem=/home/tomas/projects/quarkus-saml/src/main/resources/sp-encryption.key

# 認証をリクエストする際に必要なコンテキスト。デフォルト値は
# リクエストされるコンテキストなしです。
#idproxy.sp.context[0] = http://id.swedenconnect.se/loa/1.0/uncertified-loa3
#idproxy.sp.context[1] = http://id.swedenconnect.se/loa/1.0/uncertified-eidas-sub
#idproxy.sp.context[2] = http://id.swedenconnect.se/loa/1.0/uncertified-eidas-high

#
# Small Rye JWT 検証設定。SP の entityID をオーディエンスとして、
# IDP の entityID を発行者として更新してください。
#

# JWT トークンを保存するためにクッキーを使用します。この値である必要があります。
mp.jwt.token.header=Cookie

# JWT トークンを保持するクッキーの名前。idproxy.security.session.cookie.name に
# 設定された値、または設定されていない場合はデフォルト値と一致する必要があります。
mp.jwt.token.cookie=ID

# JWT トークンの発行者とオーディエンス。IDP の entityID と SP の entityID に
# 一致する必要があります。
mp.jwt.verify.issuer=https://galatea.stenlund.eu/idp
mp.jwt.verify.audiences=https://tomas.stenlund.eu

# トークンの署名と検証のための公開鍵と秘密鍵の場所。
mp.jwt.verify.publickey.location=/home/tomas/projects/quarkus-saml/src/main/resources/jwt.crt
smallrye.jwt.sign.key.location=/home/tomas/projects/quarkus-saml/src/main/resources/jwt.key

# ログ設定
#quarkus.log.category."io.quarkus.smallrye.jwt.runtime.auth.MpJwtValidator".level=TRACE
#quarkus.log.category."io.quarkus.smallrye.jwt.runtime.auth.MpJwtValidator".min-level=TRACE

#quarkus.http.auth.proactive=false
